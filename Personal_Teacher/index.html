<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOLLMS Personal Teacher</title>
    <script src="/lollms_assets/js/tailwindcss"></script>
    <link href="/lollms_assets/css/tailwind.min" rel="stylesheet">
    <script src="/lollms_assets/js/lollms_client_js"></script>
    <script src="/lollms_assets/js/axios.min"></script>
    <script src="/lollms_assets/js/web.app.localizer"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dexie@3.0.3/dist/dexie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">
    <link rel="stylesheet" type="text/css" href="/lollms_assets/css/lollms_markdown_renderer">
    <script src="/lollms_assets/js/lollms_markdown_renderer"></script>
    <link rel="stylesheet" href="/lollms_assets/css/hilight.js.default.min">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="/lollms_assets/js/axios.min"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-latex.min.js"></script>
    <script src="/lollms_assets/js/axios.min"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>
    <style>
        .hidden { display: none; }
        .blurred-bg { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-gradient-to-r from-blue-100 to-purple-100 font-sans text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-300">
    <div class="container mx-auto px-4 py-8">
        <nav class="flex justify-between items-center mb-8">
            <h1 data-translate="appTitle" class="text-4xl font-bold text-indigo-800">LOLLMS Personal Teacher</h1>
            <div class="flex space-x-4">
                <button id="toggleSavedCourses" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">ğŸ“š Saved Courses</button>
                <button id="darkModeToggle" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">ğŸŒ™</button>
                <button id="settings-button" data-translate="settingsButton" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">âš™ï¸ Settings</button>
                <button id="exportData" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">Export Data</button>
                <input type="file" id="importData" class="hidden" accept=".json">
                <button id="importDataBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">Import Data</button>
            </div>
        </nav>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="md:col-span-3">
                <div class="bg-white shadow-lg rounded-lg p-6 mb-8">
                    <h2 class="text-4xl font-bold text-indigo-800 mb-4">Generate New Course</h2>
                    <div class="mb-4">
                        <label for="topic" data-translate="whatWouldYouLikeToLearn" class="block mb-2 font-semibold">What would you like to learn?</label>
                        <input type="text" id="topic" class="w-full p-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Enter a topic or subject">
                    </div>
                    <div class="mb-4">
                        <label for="difficulty" data-translate="difficultyLevel" class="block mb-2 font-semibold">Difficulty Level</label>
                        <select id="difficulty" class="w-full p-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    <button id="generateCourse" data-translate="generateCourse" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-300">Generate Course</button>
                </div>
                <div id="courseContent" class="bg-white shadow-lg rounded-lg p-6 mb-8 hidden">
                    <h2 class="text-4xl font-bold text-indigo-800 mb-4" data-translate="courseContent">Course Content</h2>
                    <div id="markdown-content" class="prose"></div>
                </div>
                <div id="demo" class="bg-white shadow-lg rounded-lg p-6 mb-8 hidden">
                    <h2 class="text-4xl font-bold text-indigo-800 mb-4">Interactive Demo</h2>
                    <div id="demo-content"></div>
                </div>
                <div id="quiz" class="bg-white shadow-lg rounded-lg p-6 mb-8 hidden">
                    <h2 class="text-4xl font-bold text-indigo-800 mb-4">Quiz</h2>
                    <div id="quiz-content"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="savedCoursesPopup" class="fixed inset-0 bg-black bg-opacity-50 blurred-bg hidden">
        <div class="relative top-20 mx-auto p-8 border w-96 shadow-lg rounded-lg bg-white">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Saved Courses</h2>
                <button id="closeSavedCourses" class="text-gray-600 hover:text-gray-900 transition">âœ–ï¸</button>
            </div>
            <input type="text" id="courseSearch" class="w-full p-2 border rounded mb-4" placeholder="Search courses...">
            <ul id="courseList" class="space-y-2"></ul>
        </div>
    </div>
    <div id="settings-popup" class="fixed inset-0 bg-black bg-opacity-75 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-8 border w-96 shadow-lg rounded-lg neumorphic bg-gray-800">
            <div class="mt-3 text-center">
                <h3 class="text-2xl leading-6 font-medium text-yellow-400 mb-6">Settings</h3>
                <div class="mb-8">
                    <label id="language-select-label" for="language-select" class="text-lg font-semibold text-yellow-400 mb-2 block">Select Language:</label>
                    <select id="language-select" class="neumorphic bg-gray-700 text-yellow-400 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-yellow-400 transition duration-300">
                        <option value="ar">Arabic</option>
                        <option value="en">English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="zh">Chinese</option>
                    </select>
                </div>
                <div class="mb-8">
                    <h4 class="text-lg font-semibold text-yellow-400 mb-4">LOLLMS Settings</h4>
                    <div class="space-y-4">
                        <div>
                            <label for="host_address" class="block text-yellow-400">Host Address</label>
                            <input type="text" id="host_address" class="w-full p-2 border rounded bg-gray-700 text-yellow-400">
                        </div>
                        <div>
                            <label for="model_name" class="block text-yellow-400">Model Name</label>
                            <input type="text" id="model_name" class="w-full p-2 border rounded bg-gray-700 text-yellow-400">
                        </div>
                        <div>
                            <label for="ctx_size" class="block text-yellow-400">Context Size</label>
                            <input type="number" id="ctx_size" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="4096">
                        </div>
                        <div>
                            <label for="personality" class="block text-yellow-400">Personality</label>
                            <input type="number" id="personality" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="-1">
                        </div>
                        <div>
                            <label for="n_predict" class="block text-yellow-400">Number of Predictions</label>
                            <input type="number" id="n_predict" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="4096">
                        </div>
                        <div>
                            <label for="temperature" class="block text-yellow-400">Temperature</label>
                            <input type="number" step="0.01" id="temperature" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="0.1">
                        </div>
                        <div>
                            <label for="top_k" class="block text-yellow-400">Top K</label>
                            <input type="number" id="top_k" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="50">
                        </div>
                        <div>
                            <label for="top_p" class="block text-yellow-400">Top P</label>
                            <input type="number" step="0.01" id="top_p" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="0.95">
                        </div>
                        <div>
                            <label for="repeat_penalty" class="block text-yellow-400">Repeat Penalty</label>
                            <input type="number" step="0.01" id="repeat_penalty" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="0.8">
                        </div>
                        <div>
                        <div>
                            <label for="repeat_last_n" class="block text-yellow-400">Repeat Last N</label>
                            <input type="number" id="repeat_last_n" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="40">
                        </div>
                        <div>
                            <label for="seed" class="block text-yellow-400">Seed</label>
                            <input type="number" id="seed" class="w-full p-2 border rounded bg-gray-700 text-yellow-400">
                        </div>
                        <div>
                            <label for="n_threads" class="block text-yellow-400">Number of Threads</label>
                            <input type="number" id="n_threads" class="w-full p-2 border rounded bg-gray-700 text-yellow-400" value="8">
                        </div>
                        <div>
                            <label for="service_key" class="block text-yellow-400">Service Key</label>
                            <input type="text" id="service_key" class="w-full p-2 border rounded bg-gray-700 text-yellow-400">
                        </div>
                        <div>
                            <label for="default_generation_mode" class="block text-yellow-400">Default Generation Mode</label>
                            <select id="default_generation_mode" class="w-full p-2 border rounded bg-gray-700 text-yellow-400">
                                <option value="LOLLMS">LOLLMS</option>
                                <option value="OTHER_MODE">Other Mode</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="items-center px-4 py-3 mt-6">
                    <button id="close-settings" data-translate="closeSettings" class="w-full neumorphic electric-border bg-gray-600 text-yellow-400 px-6 py-3 rounded-full hover:bg-gray-500 transition duration-300 font-medium">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const languageSelect = document.getElementById('language-select');
        document.getElementById('settings-button').addEventListener('click', function() {
            document.getElementById('settings-popup').classList.toggle('hidden');
        });
        document.getElementById('close-settings').addEventListener('click', function() {
            document.getElementById('settings-popup').classList.add('hidden');
        });
        const translations = {
            en: {
                name: "English",
                translations: {
                    appTitle: "LOLLMS Personal Teacher",
                    settingsButton: "Settings",
                    whatWouldYouLikeToLearn: "What would you like to learn?",
                    difficultyLevel: "Difficulty level",
                    generateCourse: "Generate course",
                    courseContent: "Course content",
                    closeSettings: "Close"
                },
                promptTranslations: {
                    coursePrompt: `Generate a comprehensive {difficulty} level course on "{topic}" with the following structure:

1. Course Objectives
   - List at least 3 specific, measurable learning objectives

2. Estimated Time to Complete
   - Provide a realistic time estimate, including breakdown for each major section

3. Key Concepts
   - List and briefly explain at least 5 essential concepts related to the topic

4. Detailed Content (with subsections)
   - Divide the content into at least 3 main sections
   - For each section, and in one or many paragraphs provide the following if applicable:
     a) A clear explanation of the subtopic
     b) Relevant examples or case studies
     c) Any important formulas, theories, or principles
     d) Real-world applications

5. Exercises
   - Include at least 3 practical exercises or assignments
   - Provide clear instructions and expected outcomes for each exercise

6. Summary
   - Recap the main points covered in the course
   - Highlight key takeaways

Format the content in markdown.
Where appropriate, illustrate concepts using mermaid diagrams and svg drawings. Write the mermaid code inside a mermaid markdown tag and the svg inside an svg markdown tag.

Ensure that each section contains substantial, accurate, and relevant information related to the topic. The content should be educational, engaging, and provide real value to the learner.`,
                    quizPrompt:`Generate a 5-question multiple-choice quiz for the {difficulty} level course on "{topic}". Format the quiz as a JSON object with the following structure:
{
  "questions": [
    {
      "question": "Question text here",
      "options": ["Option A", "Option B", "Option C", "Option D"],
      "correctAnswer": 0
    },
    // ... more questions
  ]
}
Only provide the JSON object without any additional text or comments.`,
                    demoPrompt: `Based on the {difficulty} level course about "{topic}", create an interactive demo or example to illustrate a key concept. Use p5.js library in your html for the interactive demo. Put the demo code inside a html markdown tag like this:
                    \`\`\`html
                    <!-- your code here --> 
                    \`\`\``
                }
            },

            fr: {
                name: "FranÃ§ais",
                translations: {
                    appTitle: "LOLLMS Professeur Personnel",
                    settingsButton: "ParamÃ¨tres",
                    whatWouldYouLikeToLearn: "Que voulez-vous apprendre ?",
                    difficultyLevel: "Niveau de difficultÃ©",
                    generateCourse: "GÃ©nÃ©rer le cours",
                    courseContent: "Contenu du cours",
                    closeSettings: "Fermer"
                },
                promptTranslations: {
                    coursePrompt: `GÃ©nÃ©rez un cours complet de niveau {difficulty} sur "{topic}" avec la structure suivante :

1. Objectifs du cours
   - Ã‰numÃ©rez au moins 3 objectifs d'apprentissage spÃ©cifiques et mesurables

2. Temps estimÃ© pour terminer
   - Fournissez une estimation rÃ©aliste du temps, y compris une rÃ©partition pour chaque section principale

3. Concepts clÃ©s
   - Ã‰numÃ©rez et expliquez briÃ¨vement au moins 5 concepts essentiels liÃ©s au sujet

4. Contenu dÃ©taillÃ© (avec sous-sections)
   - Divisez le contenu en au moins 3 sections principales
   - Pour chaque section, et en un ou plusieurs paragraphes, fournissez les Ã©lÃ©ments suivants si applicable :
     a) Une explication claire du sous-sujet
     b) Des exemples ou Ã©tudes de cas pertinents
     c) Toute formule, thÃ©orie ou principe important
     d) Applications dans le monde rÃ©el

5. Exercices
   - Incluez au moins 3 exercices pratiques ou devoirs
   - Fournissez des instructions claires et les rÃ©sultats attendus pour chaque exercice

6. RÃ©sumÃ©
   - RÃ©capitulez les points principaux abordÃ©s dans le cours
   - Mettez en Ã©vidence les points clÃ©s Ã  retenir

Formatez le contenu en markdown.
Lorsque cela est appropriÃ©, illustrez les concepts Ã  l'aide de diagrammes mermaid et de dessins svg. Ã‰crivez le code mermaid Ã  l'intÃ©rieur d'une balise markdown mermaid et le svg Ã  l'intÃ©rieur d'une balise markdown svg.

Assurez-vous que chaque section contient des informations substantielles, prÃ©cises et pertinentes liÃ©es au sujet. Le contenu doit Ãªtre Ã©ducatif, engageant et apporter une rÃ©elle valeur Ã  l'apprenant.
`,
                    quizPrompt: "GÃ©nÃ©rez un quiz Ã  choix multiples de 5 questions pour le cours de niveau {difficulty} sur \"{topic}\". Formatez le quiz comme un objet JSON avec la structure suivante :\n{\n  \"questions\": [\n    {\n      \"question\": \"Texte de la question ici\",\n      \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n      \"correctAnswer\": 0\n    },\n    // ... plus de questions\n  ]\n}\nFournissez uniquement l'objet JSON sans texte ni commentaires supplÃ©mentaires.",
                    demoPrompt: `En se basant sur le cours de niveau {difficulty} sur "{topic}", crÃ©ez une dÃ©monstration ou un exemple interactif pour illustrer un concept clÃ©. S'il s'agit d'un sujet de programmation, fournissez du code exÃ©cutable. S'il s'agit d'un sujet thÃ©orique, fournissez un diagramme ou une explication interactive. Placez le code de dÃ©monstration dans une balise markdown html comme ceci :
                    \`\`\`html
                    <!-- votre code ici -->
                    \`\`\``
                }
            },
            it: {
                name: "Italiano",
                translations: {
                    appTitle: "LOLLMS Insegnante Personale",
                    settingsButton: "Impostazioni",
                    whatWouldYouLikeToLearn: "Cosa vorresti imparare?",
                    difficultyLevel: "Livello di difficoltÃ ",
                    generateCourse: "Genera corso",
                    courseContent: "Contenuto del corso",
                    closeSettings: "Chiudi"
                },
                promptTranslations: {
                    coursePrompt: `Genera un corso completo di livello {difficulty} su "{topic}" con la seguente struttura:

1. Obiettivi del corso
   - Elenca almeno 3 obiettivi di apprendimento specifici e misurabili

2. Tempo stimato per completare
   - Fornisci una stima realistica del tempo, inclusa una suddivisione per ciascuna sezione principale

3. Concetti chiave
   - Elenca e spiega brevemente almeno 5 concetti essenziali relativi all'argomento

4. Contenuto dettagliato (con sottosezioni)
   - Dividi il contenuto in almeno 3 sezioni principali
   - Per ciascuna sezione, e in uno o piÃ¹ paragrafi, fornisci quanto segue se applicabile:
     a) Una chiara spiegazione del sottotema
     b) Esempi o casi di studio rilevanti
     c) Eventuali formule, teorie o principi importanti
     d) Applicazioni nel mondo reale

5. Esercizi
   - Includi almeno 3 esercizi pratici o compiti
   - Fornisci istruzioni chiare e risultati attesi per ciascun esercizio

6. Riepilogo
   - Ricapitola i punti principali trattati nel corso
   - Evidenzia i punti chiave

Formatta il contenuto in markdown.
Dove appropriato, illustra i concetti utilizzando diagrammi mermaid e disegni svg. Scrivi il codice mermaid all'interno di un tag markdown mermaid e il codice svg all'interno di un tag markdown svg.

Assicurati che ogni sezione contenga informazioni sostanziali, accurate e pertinenti relative all'argomento. Il contenuto dovrebbe essere educativo, coinvolgente e fornire un reale valore per l'apprendente.
`,
                    quizPrompt: "Genera un quiz a scelta multipla di 5 domande per il corso di livello {difficulty} su \"{topic}\". Formatta il quiz come un oggetto JSON con la seguente struttura:\n{\n  \"questions\": [\n    {\n      \"question\": \"Testo della domanda qui\",\n      \"options\": [\"Opzione A\", \"Opzione B\", \"Opzione C\", \"Opzione D\"],\n      \"correctAnswer\": 0\n    },\n    // ... altre domande\n  ]\n}\nFornisci solo l'oggetto JSON senza testo aggiuntivo o commenti.",
                    demoPrompt: `Basandosi sul corso di livello {difficulty} su "{topic}", crea una demo o un esempio interattivo per illustrare un concetto chiave. Se si tratta di un argomento di programmazione, fornisci codice eseguibile. Se si tratta di un argomento teorico, fornisci un diagramma o una spiegazione interattiva. Inserisci il codice della demo all'interno di un tag markdown html come questo:
                    \`\`\`html
                    <!-- il tuo codice qui -->
                    \`\`\``
                }
            },
            de: {
                name: "Deutsch",
                translations: {
                    appTitle: "LOLLMS PersÃ¶nlicher Lehrer",
                    settingsButton: "Einstellungen",
                    whatWouldYouLikeToLearn: "Was mÃ¶chten Sie lernen?",
                    difficultyLevel: "Schwierigkeitsgrad",
                    generateCourse: "Kurs generieren",
                    courseContent: "Kursinhalt",
                    closeSettings: "SchlieÃŸen"
                },
                promptTranslations: {
                    coursePrompt: `Erstellen Sie einen umfassenden Kurs auf {difficulty}-Niveau zu "{topic}" mit der folgenden Struktur:

1. Kursziele
   - Listen Sie mindestens 3 spezifische, messbare Lernziele auf

2. GeschÃ¤tzte Zeit zur Fertigstellung
   - Geben Sie eine realistische ZeitschÃ¤tzung an, einschlieÃŸlich einer AufschlÃ¼sselung fÃ¼r jeden Hauptabschnitt

3. SchlÃ¼sselkonzepte
   - Listen Sie mindestens 5 wesentliche Konzepte auf und erklÃ¤ren Sie diese kurz, die mit dem Thema zusammenhÃ¤ngen

4. Detaillierter Inhalt (mit Unterabschnitten)
   - Teilen Sie den Inhalt in mindestens 3 Hauptabschnitte auf
   - FÃ¼r jeden Abschnitt und in einem oder mehreren AbsÃ¤tzen geben Sie Folgendes an, falls zutreffend:
     a) Eine klare ErklÃ¤rung des Unterthemas
     b) Relevante Beispiele oder Fallstudien
     c) Wichtige Formeln, Theorien oder Prinzipien
     d) Anwendungen in der realen Welt

5. Ãœbungen
   - FÃ¼gen Sie mindestens 3 praktische Ãœbungen oder Aufgaben hinzu
   - Geben Sie klare Anweisungen und erwartete Ergebnisse fÃ¼r jede Ãœbung an

6. Zusammenfassung
   - Fassen Sie die wichtigsten Punkte des Kurses zusammen
   - Heben Sie die wichtigsten Erkenntnisse hervor

Formatieren Sie den Inhalt in Markdown.
Wo es angebracht ist, veranschaulichen Sie Konzepte mit Mermaid-Diagrammen und SVG-Zeichnungen. Schreiben Sie den Mermaid-Code in eine Mermaid-Markdown-Tag und den SVG-Code in eine SVG-Markdown-Tag.

Stellen Sie sicher, dass jeder Abschnitt wesentliche, genaue und relevante Informationen zum Thema enthÃ¤lt. Der Inhalt sollte lehrreich, ansprechend und fÃ¼r den Lernenden von echtem Wert sein.
`,
                    quizPrompt: "Erstellen Sie ein Multiple-Choice-Quiz mit 5 Fragen fÃ¼r den Kurs der Stufe {difficulty} zum Thema \"{topic}\". Formatieren Sie das Quiz als JSON-Objekt mit der folgenden Struktur:\n{\n  \"questions\": [\n    {\n      \"question\": \"Fragetext hier\",\n      \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n      \"correctAnswer\": 0\n    },\n    // ... weitere Fragen\n  ]\n}\nGeben Sie nur das JSON-Objekt ohne zusÃ¤tzlichen Text oder Kommentare an.",
                    demoPrompt: `Basierend auf dem {difficulty}-Level-Kurs Ã¼ber "{topic}", erstellen Sie eine interaktive Demo oder ein Beispiel, um ein SchlÃ¼sselkonzept zu veranschaulichen. Wenn es sich um ein Programmierungsthema handelt, stellen Sie ausfÃ¼hrbaren Code bereit. Wenn es sich um ein theoretisches Thema handelt, stellen Sie ein Diagramm oder eine interaktive ErklÃ¤rung bereit. Setzen Sie den Demo-Code in einen html-Markdown-Tag wie folgt:
                    \`\`\`html
                    <!-- Ihr Code hier -->
                    \`\`\``
                }
            },
            ar: {
                name: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                translations: {
                    appTitle: "LOLLMS Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø´Ø®ØµÙŠ",
                    settingsButton: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
                    whatWouldYouLikeToLearn: "Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØªØ¹Ù„Ù…ØŸ",
                    difficultyLevel: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©",
                    generateCourse: "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø©",
                    courseContent: "Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯ÙˆØ±Ø©",
                    closeSettings: "Ø¥ØºÙ„Ø§Ù‚"
                },
                promptTranslations: {
                    coursePrompt: `Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ±Ø© Ø´Ø§Ù…Ù„Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ {difficulty} Ø­ÙˆÙ„ "{topic}" Ø¨Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ§Ù„ÙŠ:

1. Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¯ÙˆØ±Ø©
   - Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ¯ 3 Ø£Ù‡Ø¯Ø§Ù ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„

2. Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø± Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙˆØ±Ø©
   - Ù‚Ø¯Ù… ØªÙ‚Ø¯ÙŠØ±Ù‹Ø§ ÙˆØ§Ù‚Ø¹ÙŠÙ‹Ø§ Ù„Ù„ÙˆÙ‚ØªØŒ Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ ØªÙ‚Ø³ÙŠÙ… Ù„ÙƒÙ„ Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ

3. Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
   - Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ¯ ÙˆØ´Ø±Ø­ Ø¨Ø¥ÙŠØ¬Ø§Ø² 5 Ù…ÙØ§Ù‡ÙŠÙ… Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ØªØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹

4. Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (Ù…Ø¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©)
   - Ù‚Ù… Ø¨ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¥Ù„Ù‰ 3 Ø£Ù‚Ø³Ø§Ù… Ø±Ø¦ÙŠØ³ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
   - Ù„ÙƒÙ„ Ù‚Ø³Ù…ØŒ ÙˆÙÙŠ ÙÙ‚Ø±Ø© Ø£Ùˆ Ø£ÙƒØ«Ø±ØŒ Ù‚Ø¯Ù… Ù…Ø§ ÙŠÙ„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø°Ù„Ùƒ Ù…Ù…ÙƒÙ†Ù‹Ø§:
     a) Ø´Ø±Ø­ ÙˆØ§Ø¶Ø­ Ù„Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ
     b) Ø£Ù…Ø«Ù„Ø© Ø£Ùˆ Ø¯Ø±Ø§Ø³Ø§Øª Ø­Ø§Ù„Ø© Ø°Ø§Øª ØµÙ„Ø©
     c) Ø£ÙŠ ØµÙŠØº Ø£Ùˆ Ù†Ø¸Ø±ÙŠØ§Øª Ø£Ùˆ Ù…Ø¨Ø§Ø¯Ø¦ Ù…Ù‡Ù…Ø©
     d) ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ

5. Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†
   - Ù‚Ù… Ø¨ØªØ¶Ù…ÙŠÙ† 3 ØªÙ…Ø§Ø±ÙŠÙ† Ø¹Ù…Ù„ÙŠØ© Ø£Ùˆ Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
   - Ù‚Ø¯Ù… ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ù„ÙƒÙ„ ØªÙ…Ø±ÙŠÙ†

6. Ø§Ù„Ù…Ù„Ø®Øµ
   - Ù‚Ù… Ø¨ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ… ØªÙ†Ø§ÙˆÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø©
   - Ø£Ø¨Ø±Ø² Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

Ù‚Ù… Ø¨ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Markdown.
Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù‚ØªØ¶Ø§Ø¡ØŒ Ù‚Ù… Ø¨ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø®Ø·Ø·Ø§Øª Mermaid ÙˆØ±Ø³ÙˆÙ…Ø§Øª SVG. Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Mermaid Ø¯Ø§Ø®Ù„ Ø¹Ù„Ø§Ù…Ø© Markdown Mermaid ÙˆÙƒÙˆØ¯ SVG Ø¯Ø§Ø®Ù„ Ø¹Ù„Ø§Ù…Ø© Markdown SVG.

ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ÙƒÙ„ Ù‚Ø³Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬ÙˆÙ‡Ø±ÙŠØ© ÙˆØ¯Ù‚ÙŠÙ‚Ø© ÙˆØ°Ø§Øª ØµÙ„Ø© Ø¨Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠÙ‹Ø§ ÙˆØ¬Ø°Ø§Ø¨Ù‹Ø§ ÙˆÙŠÙˆÙØ± Ù‚ÙŠÙ…Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ù…ØªØ¹Ù„Ù….
`,
                    quizPrompt: "Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ù…ÙƒÙˆÙ† Ù…Ù† 5 Ø£Ø³Ø¦Ù„Ø© Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {difficulty} Ø­ÙˆÙ„ \"{topic}\". Ù‚Ù… Ø¨ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙƒØ§Ø¦Ù† JSON Ø¨Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ§Ù„ÙŠ:\n{\n  \"questions\": [\n    {\n      \"question\": \"Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§\",\n      \"options\": [\"Ø§Ù„Ø®ÙŠØ§Ø± Ø£\", \"Ø§Ù„Ø®ÙŠØ§Ø± Ø¨\", \"Ø§Ù„Ø®ÙŠØ§Ø± Ø¬\", \"Ø§Ù„Ø®ÙŠØ§Ø± Ø¯\"],\n      \"correctAnswer\": 0\n    },\n    // ... Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©\n  ]\n}\nÙ‚Ø¯Ù… ÙƒØ§Ø¦Ù† JSON ÙÙ‚Ø· Ø¯ÙˆÙ† Ø£ÙŠ Ù†Øµ Ø¥Ø¶Ø§ÙÙŠ Ø£Ùˆ ØªØ¹Ù„ÙŠÙ‚Ø§Øª.",
                    demoPrompt: `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¨Ù…Ø³ØªÙˆÙ‰ {difficulty} Ø­ÙˆÙ„ "{topic}"ØŒ Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶ ØªÙˆØ¶ÙŠØ­ÙŠ ØªÙØ§Ø¹Ù„ÙŠ Ø£Ùˆ Ù…Ø«Ø§Ù„ Ù„ØªÙˆØ¶ÙŠØ­ Ù…ÙÙ‡ÙˆÙ… Ø±Ø¦ÙŠØ³ÙŠ. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ù‚Ø¯Ù… ÙƒÙˆØ¯Ù‹Ø§ Ù‚Ø§Ø¨Ù„Ø§Ù‹ Ù„Ù„ØªÙ†ÙÙŠØ°. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù†Ø¸Ø±ÙŠÙ‹Ø§ØŒ Ù‚Ø¯Ù… Ø±Ø³Ù…Ù‹Ø§ ØªØ®Ø·ÙŠØ·ÙŠÙ‹Ø§ Ø£Ùˆ Ø´Ø±Ø­Ù‹Ø§ ØªÙØ§Ø¹Ù„ÙŠÙ‹Ø§. Ø¶Ø¹ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ Ø¯Ø§Ø®Ù„ Ø¹Ù„Ø§Ù…Ø© markdown html ÙƒÙ…Ø§ ÙŠÙ„ÙŠ:
                    \`\`\`html
                    <!-- Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§ -->
                    \`\`\``
                }
            },
            zh: {
                name: "ä¸­æ–‡",
                translations: {
                    appTitle: "LOLLMS ä¸ªäººæ•™å¸ˆ",
                    settingsButton: "è®¾ç½®",
                    whatWouldYouLikeToLearn: "ä½ æƒ³å­¦ä»€ä¹ˆï¼Ÿ",
                    difficultyLevel: "éš¾åº¦ç­‰çº§",
                    generateCourse: "ç”Ÿæˆè¯¾ç¨‹",
                    courseContent: "è¯¾ç¨‹å†…å®¹",
                    closeSettings: "å…³é—­"
                },
                promptTranslations: {
                    coursePrompt: `ç”Ÿæˆä¸€ä¸ªå…³äº "{topic}" çš„å…¨é¢ {difficulty} çº§åˆ«è¯¾ç¨‹ï¼Œç»“æ„å¦‚ä¸‹ï¼š

1. è¯¾ç¨‹ç›®æ ‡
   - åˆ—å‡ºè‡³å°‘ 3 ä¸ªå…·ä½“çš„ã€å¯è¡¡é‡çš„å­¦ä¹ ç›®æ ‡

2. é¢„è®¡å®Œæˆæ—¶é—´
   - æä¾›ä¸€ä¸ªç°å®çš„æ—¶é—´ä¼°è®¡ï¼ŒåŒ…æ‹¬æ¯ä¸ªä¸»è¦éƒ¨åˆ†çš„æ—¶é—´åˆ†é…

3. å…³é”®æ¦‚å¿µ
   - åˆ—å‡ºå¹¶ç®€è¦è§£é‡Šè‡³å°‘ 5 ä¸ªä¸ä¸»é¢˜ç›¸å…³çš„é‡è¦æ¦‚å¿µ

4. è¯¦ç»†å†…å®¹ï¼ˆå«å­éƒ¨åˆ†ï¼‰
   - å°†å†…å®¹åˆ†ä¸ºè‡³å°‘ 3 ä¸ªä¸»è¦éƒ¨åˆ†
   - å¯¹äºæ¯ä¸ªéƒ¨åˆ†ï¼Œåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ®µè½ä¸­æä¾›ä»¥ä¸‹å†…å®¹ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼š
     a) å¯¹å­ä¸»é¢˜çš„æ¸…æ™°è§£é‡Š
     b) ç›¸å…³çš„ç¤ºä¾‹æˆ–æ¡ˆä¾‹ç ”ç©¶
     c) ä»»ä½•é‡è¦çš„å…¬å¼ã€ç†è®ºæˆ–åŸåˆ™
     d) ç°å®ä¸–ç•Œä¸­çš„åº”ç”¨

5. ç»ƒä¹ 
   - åŒ…å«è‡³å°‘ 3 ä¸ªå®é™…ç»ƒä¹ æˆ–ä½œä¸š
   - ä¸ºæ¯ä¸ªç»ƒä¹ æä¾›æ˜ç¡®çš„è¯´æ˜å’Œé¢„æœŸç»“æœ

6. æ€»ç»“
   - å›é¡¾è¯¾ç¨‹ä¸­æ¶µç›–çš„ä¸»è¦è¦ç‚¹
   - å¼ºè°ƒå…³é”®è¦ç‚¹

ä½¿ç”¨ Markdown æ ¼å¼åŒ–å†…å®¹ã€‚
åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ Mermaid å›¾è¡¨å’Œ SVG ç»˜å›¾æ¥è¯´æ˜æ¦‚å¿µã€‚å°† Mermaid ä»£ç å†™åœ¨ Mermaid Markdown æ ‡ç­¾å†…ï¼Œå°† SVG ä»£ç å†™åœ¨ SVG Markdown æ ‡ç­¾å†…ã€‚

ç¡®ä¿æ¯ä¸ªéƒ¨åˆ†åŒ…å«ä¸ä¸»é¢˜ç›¸å…³çš„å®è´¨æ€§ã€å‡†ç¡®å’Œç›¸å…³çš„ä¿¡æ¯ã€‚å†…å®¹åº”å…·æœ‰æ•™è‚²æ€§ã€å¸å¼•åŠ›ï¼Œå¹¶ä¸ºå­¦ä¹ è€…æä¾›çœŸæ­£çš„ä»·å€¼ã€‚
`
                },
                quizPrompt: "ä¸º{difficulty}çº§åˆ«çš„\"{topic}\"è¯¾ç¨‹ç”Ÿæˆä¸€ä¸ªåŒ…å«5ä¸ªé€‰æ‹©é¢˜çš„æµ‹éªŒã€‚å°†æµ‹éªŒæ ¼å¼åŒ–ä¸ºå…·æœ‰ä»¥ä¸‹ç»“æ„çš„JSONå¯¹è±¡ï¼š\n{\n  \"questions\": [\n    {\n      \"question\": \"åœ¨æ­¤å¤„å¡«å†™é—®é¢˜æ–‡æœ¬\",\n      \"options\": [\"é€‰é¡¹A\", \"é€‰é¡¹B\", \"é€‰é¡¹C\", \"é€‰é¡¹D\"],\n      \"correctAnswer\": 0\n    },\n    // ... æ›´å¤šé—®é¢˜\n  ]\n}\nä»…æä¾›JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•é¢å¤–çš„æ–‡æœ¬æˆ–æ³¨é‡Šã€‚",
                demoPrompt: `åŸºäº{difficulty}çº§åˆ«çš„"{topic}"è¯¾ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ªäº¤äº’å¼æ¼”ç¤ºæˆ–ç¤ºä¾‹æ¥è¯´æ˜ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚å¦‚æœæ˜¯ç¼–ç¨‹ä¸»é¢˜ï¼Œè¯·æä¾›å¯è¿è¡Œçš„ä»£ç ã€‚å¦‚æœæ˜¯ç†è®ºä¸»é¢˜ï¼Œè¯·æä¾›å›¾è¡¨æˆ–äº¤äº’å¼è§£é‡Šã€‚å°†æ¼”ç¤ºä»£ç æ”¾åœ¨html markdownæ ‡ç­¾ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
                \`\`\`html
                <!-- åœ¨æ­¤å¤„æ”¾ç½®æ‚¨çš„ä»£ç  -->
                \`\`\``
            }            
        };
        const localizer = new WebAppLocalizer(translations, 'personalTeacher_', languageSelect);
        const mr = new MarkdownRenderer()
        mr.initMermaid()
        const lc = new LollmsClient();
        const tl = new TasksLibrary(lc);
        let db;
        function initDB() {
            db = new Dexie('LOLLMSTeacherDB');
            db.version(1).stores({
                courses: '++id, topic, content, difficulty, created, lastAccessed, rating'
            });
        }
        initDB();
        document.getElementById('toggleSavedCourses').addEventListener('click', function() {
            const savedCoursesPopup = document.getElementById('savedCoursesPopup');
            savedCoursesPopup.classList.toggle('hidden');
        });
        document.getElementById('closeSavedCourses').addEventListener('click', function() {
            const savedCoursesPopup = document.getElementById('savedCoursesPopup');
            savedCoursesPopup.classList.add('hidden');
        });
        const darkModeToggle = document.getElementById('darkModeToggle');
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark');
            darkModeToggle.textContent = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
        });
        function createQuiz(quizData) {
            const quizContainer = document.getElementById('quiz-content');
            quizContainer.innerHTML = '<h1 class="text-3xl font-bold mb-6 text-center text-indigo-600">Quiz</h1>';
            const form = document.createElement('form');
            form.id = 'quiz-form';
            form.className = 'space-y-6';
            quizData.questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'bg-gray-50 p-4 rounded-lg shadow';
                const questionText = document.createElement('p');
                questionText.className = 'font-semibold text-lg mb-3';
                questionText.textContent = `${index + 1}. ${q.question}`;
                questionDiv.appendChild(questionText);
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'space-y-2';
                q.options.forEach((option, optionIndex) => {
                    const label = document.createElement('label');
                    label.className = 'flex items-center space-x-2 cursor-pointer';
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = `question${index}`;
                    radio.value = optionIndex;
                    radio.className = 'form-radio text-indigo-600';
                    const optionText = document.createElement('span');
                    optionText.textContent = option;
                    label.appendChild(radio);
                    label.appendChild(optionText);
                    optionsDiv.appendChild(label);
                });
                questionDiv.appendChild(optionsDiv);
                form.appendChild(questionDiv);
            });
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.textContent = 'Submit Quiz';
            submitButton.className = 'w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300 mt-6';
            form.appendChild(submitButton);
            quizContainer.appendChild(form);
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                calculateScore(quizData);
            });
        }
        function calculateScore(quizData) {
            let score = 0;
            const totalQuestions = quizData.questions.length;
            const resultDiv = document.createElement('div');
            resultDiv.className = 'mt-8 p-6 bg-gray-50 rounded-lg shadow';
            const results = quizData.questions.map((q, index) => {
                const selectedAnswer = document.querySelector(`input[name="question${index}"]:checked`);
                const isCorrect = selectedAnswer && parseInt(selectedAnswer.value) === q.correctAnswer;
                if (isCorrect) score++;
                return {
                    question: q.question,
                    isCorrect,
                    correctAnswer: q.options[q.correctAnswer],
                    userAnswer: selectedAnswer ? q.options[parseInt(selectedAnswer.value)] : 'Not answered'
                };
            });
            const scorePercentage = (score / totalQuestions) * 100;
            let feedbackClass, feedbackMessage;
            if (scorePercentage >= 80) {
                feedbackClass = 'text-green-600';
                feedbackMessage = 'Excellent job!';
            } else if (scorePercentage >= 60) {
                feedbackClass = 'text-yellow-600';
                feedbackMessage = 'Good effort, but there\'s room for improvement.';
            } else {
                feedbackClass = 'text-red-600';
                feedbackMessage = 'You might want to study more and try again.';
            }
            resultDiv.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Quiz Results</h2>
                <p class="text-xl mb-2">You scored <span class="${feedbackClass} font-bold">${score} out of ${totalQuestions}</span></p>
                <p class="mb-4 ${feedbackClass} font-semibold">${feedbackMessage}</p>
                <div class="space-y-4">
                    ${results.map((result, index) => `
                        <div class="border-b pb-2">
                            <p class="font-semibold">${index + 1}. ${result.question}</p>
                            <p class="text-sm">Your answer: <span class="${result.isCorrect ? 'text-green-600' : 'text-red-600'}">${result.userAnswer}</span></p>
                            ${!result.isCorrect ? `<p class="text-sm text-green-600">Correct answer: ${result.correctAnswer}</p>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('quiz-content').appendChild(resultDiv);
        }
        document.getElementById('generateCourse').addEventListener('click', async () => {
            const topic = document.getElementById('topic').value;
            const difficulty = document.getElementById('difficulty').value;
            if (!topic) return;
            showSpinner();
            console.log("languageSelect",languageSelect.value)
            console.log("translations[languageSelect.value]",translations[languageSelect.value])
            const coursePrompt = localizer.formatPrompt("coursePrompt", {
                difficulty: difficulty,
                topic: topic
            });
            console.log("coursePrompt",coursePrompt)
            const courseContent = await lc.generate(coursePrompt);
            document.getElementById('markdown-content').innerHTML = await mr.renderMarkdown(courseContent);
            document.getElementById('courseContent').classList.remove('hidden');
            const demoPrompt = localizer.formatPrompt("demoPrompt", {
                difficulty: difficulty,
                topic: topic
            });
            const demoContent = await lc.generate(demoPrompt);
            const code_blocks = tl.extractCodeBlocks(demoContent)
            const demo = code_blocks[0];
            console.log("demo code", demo)
            if(demo && demo.length>0){
                // Create an iframe
                const iframe = document.createElement('iframe');

                // Set some attributes for the iframe
                iframe.style.width = '100%';
                iframe.style.height = '500px'; // Adjust as needed
                iframe.style.border = 'none';

                // Append the iframe to the container
                const container = document.getElementById('demo-content');
                container.appendChild(iframe);

                // Write the content to the iframe
                iframe.contentWindow.document.open();
                iframe.contentWindow.document.write(demo.content);
                iframe.contentWindow.document.close();
                document.getElementById('demo').classList.remove('hidden');
            }
            const quizPrompt = localizer.formatPrompt("quizPrompt", {
                difficulty: difficulty,
                topic: topic
            });
            const quizJSON = await lc.generate(quizPrompt);
            let quizData = {"questions": []}
            try {
                quizData = JSON.parse(quizJSON);
                createQuiz(quizData);
            } catch (error) {
                console.error('Error parsing quiz JSON:', error);
                document.getElementById('quiz-content').textContent = 'Error creating quiz. Please try again.';
            }
            document.getElementById('quiz').classList.remove('hidden');
            await saveCourse(topic, courseContent, demoContent, quizData, difficulty);
            hideSpinner();
        });
        async function saveCourse(topic, content, demoContent, quizContent, difficulty) {
            await db.courses.add({
                topic,
                content,
                demoContent, 
                quizContent,
                difficulty,
                created: new Date(),
                lastAccessed: new Date(),
                rating: 0
            });
            updateCourseList();
        }
        async function updateCourseList() {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            const courses = await db.courses.reverse().toArray();
            courses.forEach(course => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="cursor-pointer text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200">${course.topic}</span>
                        <div>
                            <span class="text-sm text-gray-500">${course.difficulty}</span>
                            <button class="ml-2 text-red-500 hover:text-red-700">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                `;
                li.querySelector('span').addEventListener('click', () => loadCourse(course.id));
                li.querySelector('button').addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteCourse(course.id);
                });
                courseList.appendChild(li);
            });
        }
        async function loadCourse(id) {
            const course = await db.courses.get(id);
            console.log(course.content)
            document.getElementById('markdown-content').innerHTML = await mr.renderMarkdown(course.content);
            document.getElementById('courseContent').classList.remove('hidden');
            const code_blocks = tl.extractCodeBlocks(course.demoContent)
            document.getElementById('demo').classList.add('hidden');
            if(code_blocks&&code_blocks.length>0){
                const demo = code_blocks[0];
                console.log("demo code", demo.content)
                // Create an iframe
                const iframe = document.createElement('iframe');

                // Set some attributes for the iframe
                iframe.style.width = '100%';
                iframe.style.height = '500px'; // Adjust as needed
                iframe.style.border = 'none';

                // Append the iframe to the container
                const container = document.getElementById('demo-content');
                container.appendChild(iframe);

                // Write the content to the iframe
                iframe.contentWindow.document.open();
                iframe.contentWindow.document.write(demo.content);
                iframe.contentWindow.document.close();
                document.getElementById('demo').classList.remove('hidden');
            }
            createQuiz(course.quizContent);
            document.getElementById('quiz').classList.remove('hidden');
            await db.courses.update(id, { lastAccessed: new Date() });
        }
        async function deleteCourse(id) {
            await db.courses.delete(id);
            updateCourseList();
        }
        document.getElementById('courseSearch').addEventListener('input', async (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const courses = await db.courses.toArray();
            const filteredCourses = courses.filter(course => 
                course.topic.toLowerCase().includes(searchTerm) || 
                course.content.toLowerCase().includes(searchTerm)
            );
            updateCourseListWithSearch(filteredCourses);
        });
        function updateCourseListWithSearch(courses) {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            courses.forEach(course => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="cursor-pointer text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200">${course.topic}</span>
                        <div>
                            <span class="text-sm text-gray-500">${course.difficulty}</span>
                            <button class="ml-2 text-red-500 hover:text-red-700">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                `;
                li.querySelector('span').addEventListener('click', () => loadCourse(course.id));
                li.querySelector('button').addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteCourse(course.id);
                });
                courseList.appendChild(li);
            });
        }
        document.getElementById('exportData').addEventListener('click', async () => {
            const courses = await db.courses.toArray();
            const dataStr = JSON.stringify(courses);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = 'lollms_courses.json';
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        });
        document.getElementById('importDataBtn').addEventListener('click', () => {
            document.getElementById('importData').click();
        });
        document.getElementById('importData').addEventListener('change', async (event) => {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = async (e) => {
                const courses = JSON.parse(e.target.result);
                await db.courses.bulkAdd(courses);
                updateCourseList();
            };
            reader.readAsText(file);
        });
        function showSpinner() {
            const spinner = document.createElement('div');
            spinner.id = 'spinner';
            spinner.innerHTML = `
                <div class="fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center">
                    <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"></div>
                    <h2 class="text-center text-white text-xl font-semibold">Loading...</h2>
                    <p class="w-1/3 text-center text-white">This may take a few seconds, please don't close this page.</p>
                </div>
            `;
            document.body.appendChild(spinner);
        }
        function hideSpinner() {
            const spinner = document.getElementById('spinner');
            if (spinner) {
                spinner.remove();
            }
        }
        updateCourseList();
    </script>
    <style>
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        @-webkit-keyframes spinner {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .hljs {
            display: block;
            overflow-x: auto;
            padding: 0.5em;
            background: #f0f0f0;
            color: #444;
        }
        .dark .hljs {
            background: #1e1e1e;
            color: #dcdcdc;
        }
        .prose {
            max-width: 65ch;
            font-size: 1.1rem;
            line-height: 1.75;
        }
        .prose h1, .prose h2, .prose h3, .prose h4 {
            margin-top: 2em;
            margin-bottom: 1em;
        }
        .prose ul, .prose ol {
            padding-left: 1.5em;
        }
        .prose code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .dark .prose code {
            background-color: rgba(255, 255, 255, 0.1);
        }
    </style>
</body>
</html>